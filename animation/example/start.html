<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>No.1 小程序帧动画组件 | 程序员思语</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="/assets/js/autopush-baidu.js"></script>
    <script src="/assets/js/autopush-360.js"></script>
    <meta name="description" content="程序员思语个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.a6e1ab57.css" as="style"><link rel="preload" href="/assets/js/app.1f01848a.js" as="script"><link rel="preload" href="/assets/js/34.a6788301.js" as="script"><link rel="preload" href="/assets/js/2.bfab96f3.js" as="script"><link rel="preload" href="/assets/js/39.dd1db457.js" as="script"><link rel="preload" href="/assets/js/7.a2070def.js" as="script"><link rel="prefetch" href="/assets/js/10.2957e9a8.js"><link rel="prefetch" href="/assets/js/100.04012559.js"><link rel="prefetch" href="/assets/js/101.01ce42b8.js"><link rel="prefetch" href="/assets/js/102.15739116.js"><link rel="prefetch" href="/assets/js/103.67ac9400.js"><link rel="prefetch" href="/assets/js/104.5e89f618.js"><link rel="prefetch" href="/assets/js/105.eeced7b4.js"><link rel="prefetch" href="/assets/js/106.89f5089b.js"><link rel="prefetch" href="/assets/js/107.6ca22092.js"><link rel="prefetch" href="/assets/js/108.5cbdae00.js"><link rel="prefetch" href="/assets/js/109.9e3fe970.js"><link rel="prefetch" href="/assets/js/11.45228265.js"><link rel="prefetch" href="/assets/js/110.5eb0860c.js"><link rel="prefetch" href="/assets/js/111.521b5602.js"><link rel="prefetch" href="/assets/js/112.38fcf913.js"><link rel="prefetch" href="/assets/js/113.e92bea7b.js"><link rel="prefetch" href="/assets/js/114.7d6c4561.js"><link rel="prefetch" href="/assets/js/115.9500989c.js"><link rel="prefetch" href="/assets/js/116.2ff33a7d.js"><link rel="prefetch" href="/assets/js/117.75195893.js"><link rel="prefetch" href="/assets/js/118.d6117992.js"><link rel="prefetch" href="/assets/js/119.62436846.js"><link rel="prefetch" href="/assets/js/12.84816a2b.js"><link rel="prefetch" href="/assets/js/120.23f57fa7.js"><link rel="prefetch" href="/assets/js/121.d59d7b0a.js"><link rel="prefetch" href="/assets/js/122.5c9b9a55.js"><link rel="prefetch" href="/assets/js/123.b03eca12.js"><link rel="prefetch" href="/assets/js/124.155f1020.js"><link rel="prefetch" href="/assets/js/125.53b3be90.js"><link rel="prefetch" href="/assets/js/126.9578b8a3.js"><link rel="prefetch" href="/assets/js/127.6f07f336.js"><link rel="prefetch" href="/assets/js/128.f1caf1c9.js"><link rel="prefetch" href="/assets/js/129.524b967f.js"><link rel="prefetch" href="/assets/js/13.e9a9bf9b.js"><link rel="prefetch" href="/assets/js/130.945df7ad.js"><link rel="prefetch" href="/assets/js/131.ce708104.js"><link rel="prefetch" href="/assets/js/132.2cc0a905.js"><link rel="prefetch" href="/assets/js/133.15743a8a.js"><link rel="prefetch" href="/assets/js/134.615ad014.js"><link rel="prefetch" href="/assets/js/135.b997301d.js"><link rel="prefetch" href="/assets/js/136.4582eb44.js"><link rel="prefetch" href="/assets/js/137.deb6072a.js"><link rel="prefetch" href="/assets/js/138.44e9a23e.js"><link rel="prefetch" href="/assets/js/139.68c0585e.js"><link rel="prefetch" href="/assets/js/14.35d3393b.js"><link rel="prefetch" href="/assets/js/140.0bc6cb92.js"><link rel="prefetch" href="/assets/js/141.34197394.js"><link rel="prefetch" href="/assets/js/142.9c682e55.js"><link rel="prefetch" href="/assets/js/143.d5dd1fe1.js"><link rel="prefetch" href="/assets/js/144.b5a8ce32.js"><link rel="prefetch" href="/assets/js/145.60212193.js"><link rel="prefetch" href="/assets/js/146.853b59a0.js"><link rel="prefetch" href="/assets/js/147.5f9ac0ef.js"><link rel="prefetch" href="/assets/js/148.407176fb.js"><link rel="prefetch" href="/assets/js/149.344249fc.js"><link rel="prefetch" href="/assets/js/15.efc6e510.js"><link rel="prefetch" href="/assets/js/150.aa25d093.js"><link rel="prefetch" href="/assets/js/151.fc090249.js"><link rel="prefetch" href="/assets/js/152.5c8f6990.js"><link rel="prefetch" href="/assets/js/153.3fb9ef96.js"><link rel="prefetch" href="/assets/js/154.1e19bb80.js"><link rel="prefetch" href="/assets/js/155.a0e38b7b.js"><link rel="prefetch" href="/assets/js/156.8be1438f.js"><link rel="prefetch" href="/assets/js/157.03938664.js"><link rel="prefetch" href="/assets/js/158.0b204cfd.js"><link rel="prefetch" href="/assets/js/159.216de527.js"><link rel="prefetch" href="/assets/js/16.5fb6a89d.js"><link rel="prefetch" href="/assets/js/160.9ad3b8d5.js"><link rel="prefetch" href="/assets/js/161.47daa7f2.js"><link rel="prefetch" href="/assets/js/162.4e4f35c1.js"><link rel="prefetch" href="/assets/js/163.28a31025.js"><link rel="prefetch" href="/assets/js/164.88344b7a.js"><link rel="prefetch" href="/assets/js/165.783137ac.js"><link rel="prefetch" href="/assets/js/166.d989ceba.js"><link rel="prefetch" href="/assets/js/167.39b0b79e.js"><link rel="prefetch" href="/assets/js/168.8a8a28df.js"><link rel="prefetch" href="/assets/js/169.e2cc86b5.js"><link rel="prefetch" href="/assets/js/17.85189c40.js"><link rel="prefetch" href="/assets/js/18.286f7a5a.js"><link rel="prefetch" href="/assets/js/19.73db1a91.js"><link rel="prefetch" href="/assets/js/20.a466c8cc.js"><link rel="prefetch" href="/assets/js/21.eb265c6d.js"><link rel="prefetch" href="/assets/js/22.683cf3a3.js"><link rel="prefetch" href="/assets/js/23.69c6c52e.js"><link rel="prefetch" href="/assets/js/24.9d2ba503.js"><link rel="prefetch" href="/assets/js/25.859c9f57.js"><link rel="prefetch" href="/assets/js/26.3093e964.js"><link rel="prefetch" href="/assets/js/27.62f34375.js"><link rel="prefetch" href="/assets/js/28.de725cd5.js"><link rel="prefetch" href="/assets/js/29.f09366cd.js"><link rel="prefetch" href="/assets/js/3.efa043ab.js"><link rel="prefetch" href="/assets/js/30.83b95423.js"><link rel="prefetch" href="/assets/js/31.8218c24d.js"><link rel="prefetch" href="/assets/js/32.d4bcd681.js"><link rel="prefetch" href="/assets/js/33.980d6153.js"><link rel="prefetch" href="/assets/js/35.747dabab.js"><link rel="prefetch" href="/assets/js/36.a43e2982.js"><link rel="prefetch" href="/assets/js/37.28b14c7f.js"><link rel="prefetch" href="/assets/js/38.22ce1eba.js"><link rel="prefetch" href="/assets/js/4.664fa4a6.js"><link rel="prefetch" href="/assets/js/40.6a5c487d.js"><link rel="prefetch" href="/assets/js/41.2c4fd7f3.js"><link rel="prefetch" href="/assets/js/42.73c1983c.js"><link rel="prefetch" href="/assets/js/43.47a2c9a9.js"><link rel="prefetch" href="/assets/js/44.1702bcf7.js"><link rel="prefetch" href="/assets/js/45.48df10f5.js"><link rel="prefetch" href="/assets/js/46.357259cb.js"><link rel="prefetch" href="/assets/js/47.7cdd3249.js"><link rel="prefetch" href="/assets/js/48.dea0791e.js"><link rel="prefetch" href="/assets/js/49.ea43cdf6.js"><link rel="prefetch" href="/assets/js/5.c406c24e.js"><link rel="prefetch" href="/assets/js/50.3b66c3aa.js"><link rel="prefetch" href="/assets/js/51.faa42d3d.js"><link rel="prefetch" href="/assets/js/52.d02215be.js"><link rel="prefetch" href="/assets/js/53.041d71f4.js"><link rel="prefetch" href="/assets/js/54.02040a9e.js"><link rel="prefetch" href="/assets/js/55.66b030eb.js"><link rel="prefetch" href="/assets/js/56.5280c1df.js"><link rel="prefetch" href="/assets/js/57.cb02ad7c.js"><link rel="prefetch" href="/assets/js/58.bfe66849.js"><link rel="prefetch" href="/assets/js/59.82d619bf.js"><link rel="prefetch" href="/assets/js/6.067b2ba9.js"><link rel="prefetch" href="/assets/js/60.df82e536.js"><link rel="prefetch" href="/assets/js/61.a0e742e3.js"><link rel="prefetch" href="/assets/js/62.54d454be.js"><link rel="prefetch" href="/assets/js/63.b1eaaf67.js"><link rel="prefetch" href="/assets/js/64.c6452f14.js"><link rel="prefetch" href="/assets/js/65.baaf19d6.js"><link rel="prefetch" href="/assets/js/66.3ac8ed5c.js"><link rel="prefetch" href="/assets/js/67.1cd0f1ce.js"><link rel="prefetch" href="/assets/js/68.0ae6f64a.js"><link rel="prefetch" href="/assets/js/69.03e1498c.js"><link rel="prefetch" href="/assets/js/70.108c7de6.js"><link rel="prefetch" href="/assets/js/71.6a9dd67e.js"><link rel="prefetch" href="/assets/js/72.64a40d80.js"><link rel="prefetch" href="/assets/js/73.cab93c00.js"><link rel="prefetch" href="/assets/js/74.cce49090.js"><link rel="prefetch" href="/assets/js/75.04795026.js"><link rel="prefetch" href="/assets/js/76.547e2e71.js"><link rel="prefetch" href="/assets/js/77.aa1208f4.js"><link rel="prefetch" href="/assets/js/78.1ff4e9eb.js"><link rel="prefetch" href="/assets/js/79.b0aa2794.js"><link rel="prefetch" href="/assets/js/8.b8d88790.js"><link rel="prefetch" href="/assets/js/80.0325f7df.js"><link rel="prefetch" href="/assets/js/81.d355c290.js"><link rel="prefetch" href="/assets/js/82.148c9dcd.js"><link rel="prefetch" href="/assets/js/83.e8d7ba91.js"><link rel="prefetch" href="/assets/js/84.fd5b9f13.js"><link rel="prefetch" href="/assets/js/85.86b4ac5c.js"><link rel="prefetch" href="/assets/js/86.d0dba395.js"><link rel="prefetch" href="/assets/js/87.aff3992c.js"><link rel="prefetch" href="/assets/js/88.66d8c6e9.js"><link rel="prefetch" href="/assets/js/89.6f31f3f9.js"><link rel="prefetch" href="/assets/js/9.2b6097ea.js"><link rel="prefetch" href="/assets/js/90.b63b627d.js"><link rel="prefetch" href="/assets/js/91.743a9dd4.js"><link rel="prefetch" href="/assets/js/92.0d086bbc.js"><link rel="prefetch" href="/assets/js/93.b0d09bde.js"><link rel="prefetch" href="/assets/js/94.73df8bfe.js"><link rel="prefetch" href="/assets/js/95.cf2f402e.js"><link rel="prefetch" href="/assets/js/96.4bb6f881.js"><link rel="prefetch" href="/assets/js/97.6eeddf48.js"><link rel="prefetch" href="/assets/js/98.35708a8e.js"><link rel="prefetch" href="/assets/js/99.774bbd24.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a6e1ab57.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">程序员思语</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/openSource/start/" class="nav-link">
  开源
</a></div><div class="nav-item"><a href="/miniprogram/component/basic/button.html" class="nav-link">
  Loreal UI组件库
</a></div><div class="nav-item"><a href="/animation/" class="nav-link router-link-active">
  Loreal动画库
</a></div><div class="nav-item"><a href="/blog/underscore/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  日记
</a></div> <a href="https://github.com/GitLuoSiyu" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/openSource/start/" class="nav-link">
  开源
</a></div><div class="nav-item"><a href="/miniprogram/component/basic/button.html" class="nav-link">
  Loreal UI组件库
</a></div><div class="nav-item"><a href="/animation/" class="nav-link router-link-active">
  Loreal动画库
</a></div><div class="nav-item"><a href="/blog/underscore/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  日记
</a></div> <a href="https://github.com/GitLuoSiyu" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>动画库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/animation/lodash/start.html" class="sidebar-link">帧动画函数库start</a></li><li><a href="/animation/lodash/cli.html" class="sidebar-link">帧动画函数库cli</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>动画组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/animation/component/start.html" class="sidebar-link">帧动画函数库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>作品集合</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/animation/example/start.html" aria-current="page" class="active sidebar-link">No.1 小程序帧动画组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/animation/example/start.html#页面调用示例代码" class="sidebar-link">页面调用示例代码</a></li><li class="sidebar-sub-header"><a href="/animation/example/start.html#组件示例代码" class="sidebar-link">组件示例代码</a></li><li class="sidebar-sub-header"><a href="/animation/example/start.html#备注" class="sidebar-link">备注</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="小程序帧动画组件"><a href="#小程序帧动画组件" class="header-anchor">#</a> <div style="display:inline-block;" data-v-2fb52f6a><img src="" alt data-v-2fb52f6a></div> 小程序帧动画组件</h1> <p>调起客户端小程序订阅消息界面，返回用户订阅消息的操作结果。当用户勾选了订阅面板中的“总是保持以上选择，不再询问”时，模板消息会被添加到用户的小程序设置页，通过 wx.getSetting 接口可获取用户对相关模板消息的订阅状态。</p> <h2 id="页面调用示例代码"><a href="#页面调用示例代码" class="header-anchor">#</a> 页面调用示例代码</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>微信官方 API：wx.requestSubscribeMessage
<br>
API 文档地址：<a src="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html">https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html</a></p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'帧动画使用方法见frame-animation目录下readme.md文件'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;动画结束 ---------------&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// component.wxml</span>
<span class="token operator">&lt;</span>frame<span class="token operator">-</span>animation url<span class="token operator">=</span><span class="token string">&quot;https://img.bazhuay.com/1585896819651_92&quot;</span> width<span class="token operator">=</span><span class="token string">'48'</span> height<span class="token operator">=</span><span class="token string">'48'</span> count<span class="token operator">=</span><span class="token string">'3'</span> duration<span class="token operator">=</span><span class="token string">'0.5'</span> playNumber<span class="token operator">=</span><span class="token string">&quot;100&quot;</span> bindend<span class="token operator">=</span><span class="token string">&quot;end&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>frame<span class="token operator">-</span>animation<span class="token operator">&gt;</span>

<span class="token comment">/**
 * 组件属性：
 * url:合成后的外链
 * width:单张图片帧的宽度
 * height:单张图片帧的高度
 * count: 图片帧数量
 * duration:播放一次完整动画所需时间；单位（秒）
 * playNumber: 播放次数(默认无限次)
 * bindend：播放结束回调
 * /
</span></code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* page.wxss */</span>
<span class="token selector">page</span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* page.json */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;frame-animation&quot;</span><span class="token operator">:</span><span class="token string">&quot;/components/frame-animation/frame-animation&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="组件示例代码"><a href="#组件示例代码" class="header-anchor">#</a> 组件示例代码</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>微信官方 API：wx.requestSubscribeMessage
<br>
API 文档地址：<a src="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html">https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html</a></p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// component.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token string">&quot;https://img.bazhuay.com/1585887536024_12&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    width<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">360</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    duration<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    playNumber<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token string">&quot;infinite&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>playNumber <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>playNumber <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>duration <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// component.wxml</span>
<span class="token operator">&lt;</span>view
  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;frame_wrap&quot;</span>
  style<span class="token operator">=</span><span class="token string">&quot;background-image: url({{url}});--width:{{width}}rpx;--height:{{height}}rpx;--count:{{count}};--duration:{{duration}};--playNumber:{{playNumber}};&quot;</span>
<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* component.wxss */</span>
<span class="token selector">.frame_wrap</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> frames <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--duration<span class="token punctuation">)</span> * 1s<span class="token punctuation">)</span> <span class="token function">steps</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--count<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--playNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--width<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--count<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> frames</span> <span class="token punctuation">{</span>
  <span class="token selector">from</span> <span class="token punctuation">{</span>
    <span class="token property">background-position-x</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">background-position-x</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--width<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">/* component.json */</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="备注"><a href="#备注" class="header-anchor">#</a> 备注</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>帧组件使用文档：</p> <ol><li>把多张图片帧合成一张
使用https://www.toptal.com/developers/css/sprite-generator合成，注意帧与帧之间边距改为0，从做左到右排列。</li> <li>把合成后图片放在云端（可以放在云开发云存储），得到合成后的网络地址。</li> <li>引用组件，并使用组件</li></ol> <p>组件属性：
url:合成后的外链
width:单张图片帧的宽度
height:单张图片帧的高度
count: 图片帧数量
duration:播放一次完整动画所需时间；单位（秒）
playNumber: 播放次数(默认无限次)
bindend：播放结束回调</p> <p>注意事项：</p> <ol><li>制作时，帧与帧编辑为0，从左到右排列</li> <li>url必须为网络外链</li></ol></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/animation/component/start.html" class="prev">
        帧动画函数库
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1f01848a.js" defer></script><script src="/assets/js/34.a6788301.js" defer></script><script src="/assets/js/2.bfab96f3.js" defer></script><script src="/assets/js/39.dd1db457.js" defer></script><script src="/assets/js/7.a2070def.js" defer></script>
  </body>
</html>
